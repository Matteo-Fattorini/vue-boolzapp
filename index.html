<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bolzapp</title>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>

    <!-- Font Awesome 5.15.1 (CDN) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
      integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
      crossorigin="anonymous"
    />

    <!-- Custom CSS -->

    <link rel="stylesheet" href="css/style.css" />

    <script defer src="js/main.js" charset="utf-8"></script>
  </head>
  <body>
    <div id="app">
      <div class="container">
        <!-- Left bar -->
        <div class="left-bar">
          <!-- Left bar header -->
          <div class="header">
            <div class="self-profile">
              <div class="logo"><img :src="mySelf.avatar" alt="LOGO" /></div>
              <span id="self-name"> {{mySelf.name}} </span>
            </div>
            <div class="icons">
              <i class="fas fa-circle-notch"></i>
              <i class="fas fa-comment-alt"></i>
              <i class="fas fa-ellipsis-v"></i>
            </div>
          </div>
          <!-- left-bar-activate-notification -->
          <div class="activate-notification">
            <div class="image"><i class="far fa-bell-slash fa-2x"></i></div>
            <div class="activate-wrapper">
              <div class="text-activate-upper">
                Get push notification when you get messages!
              </div>
              <div class="text-activate-lower">
                <a href="#">Enable desktop notification</a>
              </div>
            </div>
          </div>
          <!-- left bar search -->
          <div class="contact-search">
            <input
              @input="search"
              v-model="contactSearch"
              placeholder="&#xF002;       Search o start a new conversation "
              id="contact-search"
              type="text"
            />
          </div>

          <!-- left-bar-contacts -->
          <div class="contacts">
            <ul>
                <li
                  @click="selectContact(contact.id)"
                  v-for="contact in filteredContacts "
                  :key="contact.id"
                >
                  <div class="logo">
                    <img :src="contact.avatar" alt="LOGO" />
                  </div>
                  <span class="contact-name">{{contact.name}}</span>
                  <div class="last-message">
                    {{contact.lastMessage[contact.lastMessage.length-1]}}
                  </div>
                  <div class="lastConversation">{{contact.timeStamp[contact.timeStamp.length-1]}}</div>
                </li>      
            </ul>
          </div>
        </div>
        <!-- Right bar -->
        <div class="right-bar">
          <!-- Right-bar-Header -->
          <div class="header">
            <div class="logo">
              <div class="image">
                <img :src="currentContact.avatar" alt="LOGO" />
              </div>
              <div class="details">
                <div class="name">{{currentContact.name}}</div>
                <div v-if ="isWriting" class="lastSeen"> Is writing... </div>
                <div v-else class="lastSeen">Last seen today at {{currentContact.lastSeen}}</div>
              </div>
            </div>
            <div class="icons">
              <a href="#"><i class="fas fa-search"></i></a>
              <a href="#"><i class="fas fa-paperclip"></i></a>
              <a href="#"><i class="fas fa-ellipsis-v"></i></a>
            </div>
          </div>

          <!-- Right-bar-messageArea -->
          <div id= "prova" class="message-area">
            <ul>
              
              <li ref="listItem" class="list-element" v-for="( message,index) in currentContact.lastMessage"> <span>{{message}} </span> 
                <span class="timeStamp"> {{currentContact.timeStamp[index]}} </span>
              </li>
            </ul>
          </div>

          <!-- Right-bar-Footer -->
          <div class="footer">
            <a href="#"><i class="far fa-smile fa-2x"></i></a>
            <input
              v-model = "sendMessageText"
              @keydown.enter = "sendMessage()"
              @keyup.enter ="scrollToElement()"
              id="message-input"
              type="text"
              placeholder="Write a message"
            />
            <a href="#"><i class="fas fa-microphone fa-2x"></i></a>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
